{% extends 'accounts/base.html' %}
{% load static %}

{% block title %}Главная страница{% endblock %}

{% block content %}
    <div class="welcome-container">
        <h1>Welcome, {{ user.username }}!</h1> -> current user
        <p>You have successfully logged in.</p>
        <a href="{% url 'auth_logout' %}" style="color: #007bff; text-decoration: none;">Logout</a>

        <p>create post</p>
        <a href="{% url 'create_post' %}">create</a>
    </div>

    <div class="posts-container">
        {% for post in posts %}
        <div class="post">
            <h3>{{ post.title }}</h3>
            <p><strong>Категория:</strong> {{ post.get_category_display }}</p>
            <p><strong>Состояние:</strong> {{ post.get_condition_display }}</p>
            <p>{{ post.description }}</p>
            <small>Автор: {{ post.author.username }} | {{ post.created_at }}</small>
            {% if user.is_authenticated and user != post.author %}
            <a href="{% url 'create_exchange' post.id %}" class="btn btn-primary">Предложить обмен</a>
            {% endif %}
            
            {% if user == post.author %}
            <a href="{% url 'edit_post' post.id %}" class="btn-edit">Редактировать</a>
            <form action="{% url 'delete_post' post.id %}" method="POST">
                {% csrf_token %}
                <button type="submit">Delete</button>
            </form>
            {% endif %}
        </div>
        {% endfor %}
    </div>
{% endblock %}